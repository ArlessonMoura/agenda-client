<mat-card class="form-card">
  <mat-card-header class="form-header">
    <mat-card-title>
      <mat-icon>person_add</mat-icon>
      Novo Contato
    </mat-card-title>
  </mat-card-header>

  <mat-divider></mat-divider>

  <mat-card-content>
    <form [formGroup]="form" (ngSubmit)="cadastrar()" class="form-container">
      <div class="row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Nome</mat-label>
          <input matInput formControlName="nome" placeholder="Ex: João Silva" />
          <mat-icon matPrefix>person</mat-icon>
          <mat-hint>Mínimo 3 caracteres</mat-hint>
          <mat-error *ngIf="form.get('nome')?.hasError('required')">
            Campo obrigatório
          </mat-error>
          <mat-error *ngIf="form.get('nome')?.hasError('minlength')">
            Mínimo 3 caracteres
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Email</mat-label>
          <input
            matInput
            formControlName="email"
            type="email"
            placeholder="Ex: joao@exemplo.com"
          />
          <mat-icon matPrefix>mail</mat-icon>
          <mat-error *ngIf="form.get('email')?.hasError('email')">
            Formato inválido
          </mat-error>
        </mat-form-field>
      </div>

      <div class="row">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Celular</mat-label>
          <input type="text" mask="(00) 0000-0000" formControlName="celular" />

          <mat-icon matPrefix>smartphone</mat-icon>
          <mat-error *ngIf="form.get('celular')?.hasError('required')">
            Campo obrigatório
          </mat-error>
          <mat-error *ngIf="form.get('celular')?.hasError('pattern')">
            Formato inválido
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Telefone</mat-label>
          <input type="text" mask="(00) 0000-0000" formControlName="telefone" />

          <mat-icon matPrefix>phone</mat-icon>
          <mat-error *ngIf="form.get('telefone')?.hasError('pattern')">
            Formato inválido
          </mat-error>
        </mat-form-field>
      </div>

      <mat-checkbox formControlName="favorito" color="accent">
        <mat-icon>star</mat-icon>
        Contato Favorito
      </mat-checkbox>

      <mat-card-actions align="end">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="!form.valid || isSubmitting"
          class="submit-button"
        >
          <div class="button-content">
            <mat-icon *ngIf="!isSubmitting">save</mat-icon>
            <mat-spinner
              *ngIf="isSubmitting"
              diameter="20"
              mode="indeterminate"
            ></mat-spinner>
            {{ isSubmitting ? "Salvando..." : "Cadastrar Contato" }}
          </div>
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>
